---
layout: compress
---

<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'pt-BR' }}">
  {% include header.html %}

  <body data-theme="{{ site.mode }}" class="notransition">
    <!-- Google Analytics (GA4) com otimizações -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9K0SZYY1KR", {
        cookie_domain: "gabireze.com.br",
        cookie_flags: "SameSite=None;Secure",
        anonymize_ip: true,
        custom_parameter: true,
      });
    </script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9K0SZYY1KR"
    ></script>

    <!-- Lógica do tema melhorada -->
    <script>
      const body = document.body;
      const data = body.getAttribute("data-theme");

      const initTheme = (state) => {
        if (state === "dark") {
          body.setAttribute("data-theme", "dark");
        } else if (state === "light") {
          body.removeAttribute("data-theme");
        } else {
          localStorage.setItem("theme", data);
        }
      };

      initTheme(localStorage.getItem("theme"));

      // Improved transition timing
      setTimeout(() => {
        body.classList.remove("notransition");
        body.classList.add("loaded");
      }, 75);

      // Preload critical resources
      if ("requestIdleCallback" in window) {
        requestIdleCallback(() => {
          const link = document.createElement("link");
          link.rel = "prefetch";
          link.href = "/assets/pdf/curriculo.pdf";
          document.head.appendChild(link);
        });
      }
    </script>

    {% include navbar.html %}

    <div class="wrapper">
      <main aria-label="Content">{{ content }}</main>
    </div>

    <!-- JS principal carregado no final para melhor performance -->
    <script src="/assets/js/main.js" defer></script>
  </body>
</html>
